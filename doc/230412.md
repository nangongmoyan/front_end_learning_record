# 230412 面试记要

### 1.列出常用的数据结构，列举一下你使用过的 Javascript 中的内置对象和数据结构的实现对象

### 2.使用 Javascript 写一个方法，实现对象的深拷贝

```
export enum CloneType {
  Object = "Object",
  Array = "Array",
  Date = "Date",
  RegExp = "RegExp",
  Function = "Function",
  String = "String",
  Number = "Number",
  Boolean = "Boolean",
  Undefined = "Undefined",
  Null = "Null",
  Symbol = "Symbol",
  Set = "Set",
  Map = "Map",
}

export type _CloneType = keyof typeof CloneType;

/**
 * 检测数据类型
 * @param type cloneType
 * @param obj 检测的数据源
 * @returns Boolean
 */
function isType<T>(type: _CloneType, obj: T) {
  return Object.prototype.toString.call(obj) === `[object ${type}]`;
}

function cloneDeep<T>(obj: T, cache = new WeakMap()): T {
  // 如果不是对象或者是null，直接返回
  if (typeof obj !== "object" || obj == null) {
    return obj;
  }

  // 如果已经缓存过，直接返回缓存的值
  if (cache.has(obj)) {
    return cache.get(obj);
  }

  // 初始化返回结果
  let result: T, param!: T;
  // 如果是日期对象，直接返回一个新的日期对象
  if (isType(CloneType.Date, obj) || isType(CloneType.RegExp, obj)) {
    param = obj;
  }

  result = new (obj as any).constructor(param);
  // 如果是数组或对象，需要遍历
  if (isType(CloneType.Array, obj) || isType(CloneType.Object, obj)) {
    for (let key in obj) {
      if (obj.hasOwnProperty(key)) {
        result[key] = cloneDeep(obj[key], cache);
      }
    }
  }

  // 如果是Set
  if (isType(CloneType.Set, obj)) {
    for (let value of obj as unknown as Set<T>) {
      (result as Set<T>).add(cloneDeep(value, cache));
    }
  }

  // 如果是Map
  if (isType(CloneType.Map, obj)) {
    for (let [key, value] of obj as unknown as Map<T, T>) {
      (result as Map<T, T>).set(cloneDeep(key, cache), cloneDeep(value, cache));
    }
  }
  // 缓存值
  cache.set(obj, result);
  return result;
}
```

### 3.列出你平时经常用到的算法，以及你比较熟悉的算法

### 4.列出你知道的 Http、Https、TCP、UDP 等概念的知识要点

### 5.Javascript 实现异步编程有哪些方法
